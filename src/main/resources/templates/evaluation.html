<!doctype html>
<html dir="ltr" lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Christmas diner</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>
<body>
<header style="z-index: 98">
    <nav class="navbar navbar-expand-lg bg-light " style="z-index: 98">
        <div class="container-fluid ">

            <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                    class="navbar-toggler" data-bs-target="#navbarSupportedContent"
                    data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center " id="navbarSupportedContent">
                <ul class=" navbar-nav ">
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link active  mx-3 fs-4" href="index" style="cursor: pointer;">Home</a>
                    </li>
                    <li class="nav-item">
                        <a aria-current="page" class="nav-link active mx-3 fs-4" href="menus" style="cursor: pointer;">Menus</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<article class="text-center" id="popup">
    <h2 class="display-6 d-flex justify-content-center">Evaluation</h2>
</article>
<article class="text-center" style="width: 100%;top:20%; position: absolute">
    <div>
        <div th:text="${personService.calorieNeeded}">
        </div>
        <span>daily needed calories </span>
    </div>
    <div>
        <div th:text="${mealService.sumCalories()}">
        </div>
        <span>sum of calories from chosen meals</span>
    </div>
</article>
<article>
    <div class="d-flex justify-content-center" id="charts" style="width: 100%;">
        <canvas id="chart1" style="width:100%;max-width:300px;max-height: 300px"></canvas>
        <canvas id="chart2" style="width:100%;max-width:300px;max-height: 300px"></canvas>
        <canvas id="chart3" style="width:100%;max-width:300px;max-height: 300px"></canvas>
    </div>

    <div class="d-flex justify-content-center" style="width: 100%;">
        <canvas id="chart4" style="width:100%;max-width:300px;max-height: 300px"></canvas>
        <canvas id="chart5" style="width:100%;max-width:300px;max-height: 300px"></canvas>
    </div>
</article>

<script th:inline="javascript">
    /*<![CDATA[*/
    let christmas = [[${mealService.sumCalories()}]];
    let daily = [[${personService.calorieNeeded}]];
    let drinks = [[${mealService.sumCaloriesForDrinks()}]];
    let dessert = [[${mealService.sumCaloriesForDesserts()}]];
    console.log(christmas);
    console.log(daily);
    console.log(drinks);
    console.log(dessert);
    /*]]>*/
</script>
<script>

    $(document).ready(function () {
        const charts = document.getElementById("charts");

        let x1 = ["daily", "christmas"];
        let y1 = [daily, christmas];
        let x2 = ["drinks", "christmas"];
        let y2 = [drinks, christmas];
        let x3 = ["drinks", "daily"];
        let y3 = [drinks, daily];
        let x4 = ["dessert", "christmas"];
        let y4 = [dessert, christmas];
        let x5 = ["dessert", "daily"];
        let y5 = [dessert, daily];

        let barColors = [
            "#b91d47",
            "#00aba9",
        ];

        new Chart(document.getElementById("chart1"), {
            type: "pie",
            data: {
                labels: x1,
                datasets: [{
                    backgroundColor: barColors,
                    data: y1
                }]
            },
            options: {
                response: true,
                maintainAspectRatio: true,
                title: {
                    display: true,
                    text: "Pie chart for your calorie intake "
                }
            }
        });


    });
</script>
<script src="https://unpkg.com/magic-snowflakes/dist/snowflakes.min.js"></script>
<script>
    new Snowflakes({
        minSize: 10,
        maxSize: 100,
        color: '#A0E3F6',
        wind: true
    });
</script>
<script crossorigin="anonymous"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>